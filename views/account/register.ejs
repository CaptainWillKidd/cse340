<main class="register-main">
  <h1><%= title %></h1>
  <% if (messages && messages.length > 0) { %>
    <div class="flash-message">
      <% messages.forEach(function(msg){ %>
        <p><%= msg %></p>
      <% }) %>
    </div>
  <% } %>
  <form class="register-form" action="/account/register" method="post" autocomplete="off">
    <label for="account_firstname">First Name</label>
    <input type="text" id="account_firstname" name="account_firstname" required value="<%= typeof account_firstname !== 'undefined' ? account_firstname : '' %>">

    <label for="account_lastname">Last Name</label>
    <input type="text" id="account_lastname" name="account_lastname" required value="<%= typeof account_lastname !== 'undefined' ? account_lastname : '' %>">

    <label for="account_email">Email</label>
    <input type="email" id="account_email" name="account_email" required autocomplete="username" value="<%= typeof account_email !== 'undefined' ? account_email : '' %>">

    <label for="account_password">Password</label>
    <div class="password-wrapper">
      <input type="password" id="account_password" name="account_password" required autocomplete="new-password"
        minlength="12"
        title="At least 12 characters, 1 uppercase, 1 number, 1 special character">
      <button type="button" class="toggle-password" onclick="togglePassword()">Show</button>
    </div>
    <small class="password-hint">
      Password must be at least 12 characters, contain 1 uppercase letter, 1 number, and 1 special character.
    </small>

    <button type="submit">Register</button>
  </form>
</main>
<script>
function togglePassword() {
  const pwd = document.getElementById('account_password');
  const btn = document.querySelector('.toggle-password');
  if (pwd.type === 'password') {
    pwd.type = 'text';
    btn.textContent = 'Hide';
  } else {
    pwd.type = 'password';
    btn.textContent = 'Show';
  }
}
</script>
